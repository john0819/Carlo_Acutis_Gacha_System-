# 📸 图片更新说明

## 当前图片管理机制

系统使用数据库存储卡片信息，图片文件存放在 `images/` 目录下。

## 🔄 更新图片的步骤

### 方法一：使用更新脚本（推荐）

1. **将新图片放入 `images/` 目录**
   ```bash
   # 支持的格式：.jpg, .jpeg, .png
   # 建议命名：image1.jpg, image2.jpg, image3.jpg ...
   ```

2. **运行更新脚本**
   ```bash
   ./update_cards.sh
   ```

3. **脚本会自动：**
   - 扫描 `images/` 目录下的所有图片文件
   - 更新数据库中的卡片列表
   - 显示更新后的卡片列表

### 方法二：手动更新（高级）

如果需要保留用户数据，可以使用智能更新脚本：
```bash
./update_cards_safe.sh
```

## ⚠️ 注意事项

### 当前 `update_cards.sh` 的行为：
- ✅ 会自动扫描 `images/` 目录下的所有图片
- ⚠️ **会清空所有用户卡包数据**（`user_cards` 表）
- ⚠️ **会清空所有每日抽卡记录**（`daily_draws` 表）
- ✅ 会重新创建所有卡片记录

### 适用场景：
- 🆕 首次设置系统
- 🔄 完全重置卡片库
- 📦 批量替换所有图片

### 不适用场景：
- ➕ 只想添加新图片（不想删除用户数据）
- 🔧 只想更新部分图片

## 💡 建议

1. **更新前备份**：如果系统已有用户数据，建议先备份数据库
2. **图片命名**：建议使用有意义的文件名，如 `image1.jpg`, `image2.jpg`
3. **图片格式**：支持 `.jpg`, `.jpeg`, `.png` 格式
4. **图片大小**：建议图片大小适中，避免加载过慢

## 📋 更新检查清单

- [ ] 确认数据库正在运行（`./start_db.sh`）
- [ ] 将新图片放入 `images/` 目录
- [ ] 确认图片文件名正确
- [ ] 运行 `./update_cards.sh`
- [ ] 检查更新结果
- [ ] 测试抽卡功能

## 🔍 查看当前卡片列表

```bash
docker exec h5project_db psql -U h5user -d h5project -c "SELECT id, name, image_url FROM cards ORDER BY id;"
```

